# Copyright (c) 2019 Patrick Diehl
#
# Distributed under the Boost Software License, Version 1.0. (See accompanying
# file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

FROM fedora:34
MAINTAINER Patrick Diehl <patrickdiehl@lsu.edu>
# install dependencies
RUN dnf update -y
RUN dnf install -y \ 
hpx-devel \
cmake \
blaze-devel \ 
vtk-devel \
yaml-cpp-devel \
doxygen \
graphviz \
git \
libXext-devel \
gmsh-devel \
metis-devel \
gcovr \
python3 \
python3-pip \
gmsh-devel \
rpm-build \
pcl-devel

# Install build tools
RUN dnf install @development-tools -y
 
# Install BlazeIterative
RUN git clone https://github.com/STEllAR-GROUP/BlazeIterative.git &&  \
cd BlazeIterative &&  \
cmake . && \
make install && \
cd .. && \
rm -rf BlazeIterative

# Install NLMech
RUN git clone https://github.com/nonlocalmodels/NLMech.git && \
cd NLMech && \
mkdir build && \
cd build && \
cmake -DCMAKE_BUILD_TYPE=Release -DEnable_Documentation=ON -DEnable_Tools=ON -DEnable_PCL=ON .. && \
make install 

# Install 
RUN python3 -m pip install cpp-coveralls
