# Copyright (c) 2019 Patrick Diehl
#
# Distributed under the Boost Software License, Version 1.0. (See accompanying
# file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

FROM diehlpk/nonlocalmodels:baseimage
MAINTAINER Patrick Diehl <patrickdiehl@lsu.edu> 

WORKDIR /app

ENV CC gcc
ENV CXX g++

RUN git clone https://github.com/nonlocalmodels/NLMech.git  --depth=1

RUN cd NLMech

RUN cd /app/NLMECH mkdir build && cd build &&  cmake -DHPX_IGNORE_COMPILER_COMPATIBILITY=ON -DCMAKE_BUILD_TYPE=Release .. && suda make install

RUN make -j 
